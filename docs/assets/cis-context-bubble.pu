@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

' settings & styling
skinparam titleFontSize 32

title Cattle Information System with Bubble Contexts - Context Diagram

' variables
!$farm_animal_info = "Updates on farm and animal information."


Person(farmer, "Farmer", "Manages all farm and animal data.")
Person(accountant, "Accountant", "Does the farm and agricultural accounting for farmers.")
Lay_L(farmer, accountant)

Enterprise_Boundary(cis, "Cattle Information System") {
	System(cis_ienr, "Identification & Registration", "Local, enriched copy with all farm- and animalinformation needed.")
	SystemDb(db, "Database", "Farm- and animal data.")
	System(agrival, "AgriValuate", "Application for farm accounting.")
	System(acl, "Anti Corruption Layer")
	System(bubble_animals, "Animals Bubble Context")
	System(bubble_farms, "Farms Bubble Context")
	Lay_L(acl, db)
	Lay_R(acl, bubble_animals)
	Lay_D(bubble_animals, bubble_farms)
	Rel_L(acl, db, "Uses")
	Rel_L(bubble_animals, acl, "Uses")
	Rel_L(bubble_farms, acl, "Uses")

	Rel(accountant, cis_ienr, "Authorizations")
	Rel(cis_ienr, db, "Uses")
	Rel_R(agrival, cis_ienr, "Uses")
	Rel(accountant, agrival, "Uses")
}

System_Ext(fms, "Farm Management System")
System_Ext(ienr, "Identification & Registration", $sprite="img:rvo.png")

Rel_D(farmer, fms, $farm_animal_info)
Rel_D(fms, ienr, $farm_animal_info)
Rel_R(ienr, cis_ienr, $farm_animal_info)

@enduml
